<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PDFå¤‰æ›ã‚¢ãƒ—ãƒª</title>
    <base href="/" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <link href="css/app.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="PdfConverterApp.styles.css" rel="stylesheet" />
</head>

<body>
    <div id="app">
        <div class="d-flex justify-content-center align-items-center vh-100">
            <div class="text-center">
                <div class="spinner-border text-primary mb-3" role="status" style="width: 3rem; height: 3rem;">
                    <span class="visually-hidden">èª­ã¿è¾¼ã¿ä¸­...</span>
                </div>
                <h5 class="text-muted">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</h5>
            </div>
        </div>
    </div>

    <div id="blazor-error-ui">
        <div class="alert alert-danger m-3" role="alert">
            <i class="bi bi-exclamation-triangle"></i>
            äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
            <a href="" class="reload btn btn-outline-danger btn-sm ms-2">å†èª­ã¿è¾¼ã¿</a>
            <a class="dismiss btn-close" aria-label="Close"></a>
        </div>
    </div>

    <!-- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ç”¨JavaScript -->
    <script>
        /**
         * Base64ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
         */
        window.downloadFileFromBase64 = (base64Data, fileName, contentType) => {
            try {
                console.log(`ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰é–‹å§‹: ${fileName}`);

                // Base64ã‚’ãƒã‚¤ãƒŠãƒªã«å¤‰æ›
                const byteCharacters = atob(base64Data);
                const byteNumbers = new Array(byteCharacters.length);

                for (let i = 0; i < byteCharacters.length; i++) {
                    byteNumbers[i] = byteCharacters.charCodeAt(i);
                }

                const byteArray = new Uint8Array(byteNumbers);
                const blob = new Blob([byteArray], { type: contentType });

                // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Ÿè¡Œ
                const url = window.URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = fileName;

                // DOMæ“ä½œã§ã‚¯ãƒªãƒƒã‚¯å®Ÿè¡Œ
                document.body.appendChild(link);
                link.click();

                // ãƒªã‚½ãƒ¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
                setTimeout(() => {
                    document.body.removeChild(link);
                    window.URL.revokeObjectURL(url);
                }, 100);

                console.log(`ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å®Œäº†: ${fileName}`);
            } catch (error) {
                console.error('ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼:', error);
                alert(`ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ: ${error.message}`);
            }
        };

        // ã‚¨ãƒ©ãƒ¼UIåˆ¶å¾¡
        document.addEventListener('DOMContentLoaded', function () {
            const errorUI = document.getElementById('blazor-error-ui');
            if (errorUI) {
                const dismissButton = errorUI.querySelector('.dismiss');
                if (dismissButton) {
                    dismissButton.addEventListener('click', function () {
                        errorUI.style.display = 'none';
                    });
                }
            }
        });
    </script>

    <script src="_framework/blazor.webassembly.js"></script>
    <script>navigator.serviceWorker.register('service-worker.js');</script>
</body>

</html>
<!--<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PdfConverterApp</title>
    <base href="/" />
    <link rel="stylesheet" href="css/app.css" />-->
<!-- If you add any scoped CSS files, uncomment the following to load them
<link href="PdfConverterApp.styles.css" rel="stylesheet" /> -->
<!--<link href="manifest.webmanifest" rel="manifest" />
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png" />
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">ğŸ—™</span>
    </div>
    <script src="_framework/blazor.webassembly.js"></script>
    <script>navigator.serviceWorker.register('service-worker.js');</script>
</body>

</html>-->
